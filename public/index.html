<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Todo App</title>
    <style>
      body {
        font-family: Arial, sans-serif;
        background-color: #f0f2f5;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding-top: 50px;
      }

      h1 {
        color: #333;
      }

      #input {
        padding: 10px;
        width: 250px;
        border: 2px solid #ddd;
        border-radius: 4px;
        font-size: 16px;
        transition: border-color 0.3s;
      }

      #input:focus {
        outline: none;
        border-color: #007bff;
      }

      button {
        padding: 10px 20px;
        margin-left: 10px;
        background-color: #007bff;
        color: white;
        border: none;
        border-radius: 4px;
        font-size: 16px;
        cursor: pointer;
        transition: background-color 0.3s;
      }

      button:hover {
        background-color: #0056b3;
      }

      ul {
        list-style-type: none;
        padding: 0;
        margin-top: 30px;
        width: 300px;
      }

      li {
        background-color: #fff;
        margin: 8px 0;
        padding: 12px 16px;
        border-radius: 6px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        transition: transform 0.2s, box-shadow 0.2s;
        cursor: pointer;
      }

      li:hover {
        transform: scale(1.02);
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
        background-color: #f9f9f9;
      }
    </style>
  </head>
  <body>
    <h1>My Todo List</h1>
    <div>
      <input type="text" id="input" placeholder="Enter a new task..." />
      <button onclick="add()">Add</button>
    </div>
    <ul id="task"></ul>

    <script>
      const taskElem = document.getElementById("task");
      const input = document.getElementById("input");

      const getTasks = async () => {
        const response = await fetch("https://todo-backend-s9j6.onrender.com/tasks", {
          method: "GET",
        });
        const body = await response.json();

        taskElem.innerHTML = '';
        body.tasks.forEach((task) => {
          const newLi = document.createElement("li");
          newLi.innerText = task.name;
          taskElem.appendChild(newLi);
        });
      };

      getTasks();

      const add = async () => {
        const requestOptions = {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            newTask: input.value,
          }),
        };

        await fetch("https://todo-backend-s9j6.onrender.com/task", requestOptions);
        input.value = ''; // clear input
        getTasks();
      };
    </script>
  </body>
</html>
